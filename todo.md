# 存量用户套餐推荐系统 - 项目TODO## 数据库与架构
- [x] 设计数据库模型（plans表）
- [x] 创建了Drizzle ORM schema
- [x] 数据库迁移和初始化

## 后端业务实现
- [x] 实现套餐CRUD API（GET/POST/PUT/DELETE）
- [x] 实现价阶生成逻辑（获取在售套餐的价格档位）
- [x] 实现推荐引擎核心逻辑
  - [x] 目标价位选择算法
  - [x] 资源匹配和候选套餐排序
  - [x] 推荐理由生成
- [x] 实现Excel上传和解析API
- [x] 实现数据清洗规则（不限/∞、百分比、千分位等）
- [x] 实现推荐结果返回 API
- [x] 后端 API单元测试

## 前端界面开发
- [x] 设计前端页面布局和导航
- [x] 实现套餐管理表单和列表
  - [x] 新增套餐表单
  - [x] 套餐列表展示
  - [x] 删除套餐功能
  - [x] 在售统计显示
- [x] 实现推荐计算区
  - [x] Excel文件上传
  - [x] 推荐结果表格展示
  - [x] 推荐理由和风险标记显示
- [x] 实现CSV导出功能
- [x] 错误提示和边界情况处理
  - [x] 无在售套餐提示
  - [x] 文件类型验证
  - [x] 无推荐结果提示

## 前后端联调
- [x] 套餐CRUD功能联调测试
- [x] Excel上传和推荐流程端到端测试
- [x] CSV导出功能测试
- [x] 推荐规则验证（diff阈值、资源匹配等）

## 测试与优化
- [x] 边界值测试（diff=10, diff=50, diff>50）
- [x] 资源匹配测试
- [x] 数据清洗测试
- [x] 文件类型验证测试
- [x] 性能优化（大批量数据处理）
- [x] UI/UX优化

## 部署与交付
- [x] 创建项目检查点
- [x] 生成运行说明文档
- [x] 提供示例Excel文件


## 新功能：用户精准套餐推荐查询

### 数据库模型升级
- [ ] 在plans表中添加套餐类型字段（个人版/家庭版/全光版）
- [ ] 在plans表中添加是否包含宽带字段
- [ ] 新增推荐结果存储表（用于会话管理）
- [ ] 添加数据库迁移脚本

### 推荐引擎升级
- [ ] 实现recommendMultiple函数（返回1-3个最优套餐）
- [ ] 实现套餐类型筛选逻辑
- [ ] 实现匹配度评分计算
- [ ] 编写推荐引擎升级测试

### 后端API接口
- [ ] 实现按手机号查询用户API
- [ ] 实现多套餐推荐API
- [ ] 实现推荐结果保存API
- [ ] 实现推荐话术生成API（集成AI）
- [ ] 编写API单元测试

### 前端查询页面
- [ ] 创建QueryRecommendation.tsx页面
- [ ] 实现手机号输入框和验证
- [ ] 设计用户信息展示区
- [ ] 设计推荐结果表格
- [ ] 实现从批量推荐页面跳转
- [ ] 实现加载状态和错误提示

### AI推荐话术生成
- [ ] 集成硅基流动API
- [ ] 集成V-API中转API
- [ ] 实现话术生成逻辑
- [ ] 前端展示话术结果
- [ ] 支持复制和导出话术

### 测试和优化
- [ ] 单元测试（查询、推荐、话术生成）
- [ ] 集成测试（完整流程）
- [ ] 性能优化（查询响应时间≤2秒）
- [ ] UI/UX优化
- [ ] 文档更新

